"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2876],{3905:(e,o,n)=>{n.d(o,{Zo:()=>d,kt:()=>v});var t=n(7294);function a(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function r(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?r(Object(n),!0).forEach((function(o){a(e,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))}))}return e}function i(e,o){if(null==e)return{};var n,t,a=function(e,o){if(null==e)return{};var n,t,a={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],o.indexOf(n)>=0||(a[n]=e[n]);return a}(e,o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],o.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=t.createContext({}),c=function(e){var o=t.useContext(s),n=o;return e&&(n="function"==typeof e?e(o):l(l({},o),e)),n},d=function(e){var o=c(e.components);return t.createElement(s.Provider,{value:o},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var o=e.children;return t.createElement(t.Fragment,{},o)}},m=t.forwardRef((function(e,o){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=c(n),m=a,v=p["".concat(s,".").concat(m)]||p[m]||u[m]||r;return n?t.createElement(v,l(l({ref:o},d),{},{components:n})):t.createElement(v,l({ref:o},d))}));function v(e,o){var n=arguments,a=o&&o.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=m;var i={};for(var s in o)hasOwnProperty.call(o,s)&&(i[s]=o[s]);i.originalType=e,i[p]="string"==typeof e?e:a,l[1]=i;for(var c=2;c<r;c++)l[c]=n[c];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7415:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var t=n(7462),a=(n(7294),n(3905));const r={title:"Vista para Nuevo proyecto, ver detalle y editar"},l=void 0,i={unversionedId:"Version 1.0/SPRINT 3 - SPA/Dando funcionalidad a las vistas/Nuevo proyecto, detalle y editar",id:"Version 1.0/SPRINT 3 - SPA/Dando funcionalidad a las vistas/Nuevo proyecto, detalle y editar",title:"Vista para Nuevo proyecto, ver detalle y editar",description:"Ver detalle del proyecto",source:"@site/docs/03-Version 1.0/SPRINT 3 - SPA/06-Dando funcionalidad a las vistas/05-Nuevo proyecto, detalle y editar.md",sourceDirName:"03-Version 1.0/SPRINT 3 - SPA/06-Dando funcionalidad a las vistas",slug:"/Version 1.0/SPRINT 3 - SPA/Dando funcionalidad a las vistas/Nuevo proyecto, detalle y editar",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 3 - SPA/Dando funcionalidad a las vistas/Nuevo proyecto, detalle y editar",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-Version 1.0/SPRINT 3 - SPA/06-Dando funcionalidad a las vistas/05-Nuevo proyecto, detalle y editar.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Vista para Nuevo proyecto, ver detalle y editar"},sidebar:"tutorialSidebar",previous:{title:"Componente EditarPerfil",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 3 - SPA/Dando funcionalidad a las vistas/Componente EditarPerfil"},next:{title:"HistX - Dise\xf1o de la base de datos",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/HistX - Dise\xf1o de la base de datos"}},s={},c=[{value:"Ver detalle del proyecto",id:"ver-detalle-del-proyecto",level:2},{value:"Este ser\xeda el c\xf3digo completo",id:"este-ser\xeda-el-c\xf3digo-completo",level:3},{value:"Vista para nuevo proyecto",id:"vista-para-nuevo-proyecto",level:2},{value:"Aqu\xed tenemos el c\xf3digo completo de la vista",id:"aqu\xed-tenemos-el-c\xf3digo-completo-de-la-vista",level:3},{value:"Vista para editar proyecto",id:"vista-para-editar-proyecto",level:2},{value:"Este ser\xeda el c\xf3digo completo",id:"este-ser\xeda-el-c\xf3digo-completo-1",level:3},{value:"\xbfHemos terminado?",id:"hemos-terminado",level:2}],d={toc:c},p="wrapper";function u(e){let{components:o,...r}=e;return(0,a.kt)(p,(0,t.Z)({},d,r,{components:o,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"ver-detalle-del-proyecto"},"Ver detalle del proyecto"),(0,a.kt)("p",null,"Esta vista es bastante sencilla. "),(0,a.kt)("p",null,"En primer lugar necesitamos modificar el template para ",(0,a.kt)("strong",{parentName:"p"},"asignar ids y clases "),"a los elementos (p\xe1rrafos, imagen, etc) en los que debemos inyectar los datos procedentes del proyecto corresondiente."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="proyectoNuevo.js"',title:'"proyectoNuevo.js"'},'export default {\n  template: // html\n  `\n  <div class="container">\n    <h1 class="mt-5">Detalle del proyecto</h1>\n    <div class="d-flex justify-content-end">\n      <button id="botonVolver" class="btn btn-outline-secondary mt-5 bi bi-arrow-bar-left">\n        Volver\n      </button>\n    </div>\n  \n    <div class="row mt-2">\n      <div class="col-12 col-md-4 mb-3">\n        <img id="imagenJuego" src="images/juego.jpg" alt="" class="img-fluid">\n      </div>\n      <div class="col-12 col-md-8">\n        <p>\n          <p><strong>Nombre: </strong><span id="nombreJuego">TETRIS</span></p>\n          <p><strong>Descripci\xf3n: </strong><span id="descripcion">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam modi dicta iste debitis recusandae perspiciatis quae. Eius impedit saepe autem velit voluptate, odio sequi expedita nisi est molestiae quo quisquam!</span></p>\n          <p><strong>Estado: </strong><span id="estado">Estado</span></p>\n          <p><strong>Fecha: </strong><span id="fecha">12/12/2023</span></p>\n          <p><strong>Enlace: </strong><span id="enlace">http://www.enlaceapp.com</span></p>\n          <p><strong>Repositorio: </strong><span id="repositorio">carrebola.github.com/123456</span></p>\n        </p>\n      </div>\n    </div>\n    <div class="container fixed-bottom d-flex justify-content-end" style="padding: 0px 0px 100px 0px">\n      <button\n        id="botonEditarDetalle"\n        data-id=""\n        class="btn btn-success rounded-circle fs-3 shadow bi bi-pencil router-link"\n        style="width: 50px"\n      >\n      </button>\n    </div>\n  </div>\n\n')),(0,a.kt)("p",null,"En el lado de la l\xf3gica vamos a hacer lo siguiente:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Primero vamos a simular que hacemos una consulta a la bd con el id del proyecto correspondiente. Para ello tomaremos el array con todos los proyectos y lo filtraremos para el id en cuesti\xf3n"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// Simulamos la consulta a un proyecto por id filtrando de todos nuestros proyectos de prueba el que tiene el id que hemos recibido como par\xe1metro\n  const proyectoArray = proyectos.filter(p => p.id == id)\n  const proyecto = proyectoArray[0]\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ahora vamos a modificar la fecha para poder introducirla en nuestro input de tipo date. Piensa que nosotros tenemos un formato yy-mm-ddThh::mm::ss y necesitamos yy-mm-dd."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// Modificamos el formato de la fecha quedandonos solo con el yy-mm-dd\n  const fecha = proyecto.created_at\n  const fechaCorta = fecha.split('T')[0]\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Inyectamos los datos"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// Inyectamos los datos en la vista\n  document.querySelector('#imagenJuego').setAttribute('src', proyecto.imagen)\n  document.querySelector('#nombreJuego').innerHTML = proyecto.nombre\n  document.querySelector('#descripcion').innerHTML = proyecto.descripcion\n  document.querySelector('#estado').innerHTML = proyecto.estado\n  document.querySelector('#fecha').innerHTML = fechaCorta\n  document.querySelector('#enlace').innerHTML = proyecto.enlace\n  document.querySelector('#repositorio').innerHTML = proyecto.repositorio\n")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"A\xf1adimos el id del proyecto al bot\xf3n editar para que al pulsarlo podamos llamar la vista en cuesti\xf3n y pasarle el id:")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// A\xf1adimos el id en data-id al bot\xf3n editar para que al detectar el click podamos llamar a la vista de edici\xf3n pasandole el id en cuesti\xf3n\n  document.querySelector('#botonEditarDetalle').setAttribute('data-id', proyecto.id)\n")),(0,a.kt)("p",{parentName:"li"},"Y gestionamos los eventos de los botones: volver atr\xe1s y editar cargando las vista que corresponda con ",(0,a.kt)("inlineCode",{parentName:"p"},"window.location")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// A\xf1adimos el id en data-id al bot\xf3n editar para que al detectar el click podamos llamar a la vista de edici\xf3n pasandole el id en cuesti\xf3n\n  document.querySelector('#botonEditarDetalle').setAttribute('data-id', proyecto.id)\n  \n  // Boton volver atras\n  document.querySelector('#botonVolver').addEventListener('click', () => {\n    // Carga la url anterior que encuentra en el historial\n    window.history.back()\n  })\n\n  // Boton editar\n  document.querySelector('#botonEditarDetalle').addEventListener('click', (e) => {\n    const id = e.target.dataset.id\n    window.location = `#/proyectoEditar/${id}`\n  })\n")))),(0,a.kt)("h3",{id:"este-ser\xeda-el-c\xf3digo-completo"},"Este ser\xeda el c\xf3digo completo"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="proyectoDetalle.js"',title:'"proyectoDetalle.js"'},'import { proyectos } from \'../bd/datosPrueba\'\n\nexport default {\n  template: // html\n  `\n  <div class="container">\n  <h1 class="mt-5">Detalle del proyecto</h1>\n  <div class="d-flex justify-content-end">\n    <bottom id="botonVolver" class="btn btn-outline-secondary mt-5 bi bi-arrow-bar-left">\n      Volver</bottom>\n  </div>\n  \n  <div class="row mt-2">\n    <div class="col-12 col-md-4 mb-3">\n      <img id="imagenJuego" src="images/juego.jpg" alt="" class="img-fluid">\n    </div>\n    <div class="col-12 col-md-8">\n      <p>\n        <p><strong>Nombre: </strong><span id="nombreJuego">TETRIS</span></p>\n        <p><strong>Descripci\xf3n: </strong><span id="descripcion">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam modi dicta iste debitis recusandae perspiciatis quae. Eius impedit saepe autem velit voluptate, odio sequi expedita nisi est molestiae quo quisquam!</span></p>\n        <p><strong>Estado: </strong><span id="estado">Estado</span></p>\n        <p><strong>Fecha: </strong><span id="fecha">12/12/2023</span></p>\n        <p><strong>Enlace: </strong><span id="enlace">http://www.enlaceapp.com</span></p>\n        <p><strong>Repositorio: </strong><span id="repositorio">carrebola.github.com/123456</span></p>\n      </p>\n    </div>\n  </div>\n  <div\n    class="container fixed-bottom d-flex justify-content-end"\n    style="padding: 0px 0px 100px 0px"\n  >\n    <button\n      id="botonEditarDetalle"\n      data-id=""\n      class="btn btn-success rounded-circle fs-3 shadow bi bi-pencil router-link"\n      style="width: 50px"\n    >\n     \n    </button>\n  </div>\n  \n</div>\n  `,\n  script: (id) => {\n    console.log(\'Vista proyectoDetalle cargada\')\n    console.log(proyectos, id)\n\n    // Simulamos la consulta a un proyecto por id filtrando de todos nuestros proyectos de prueba el que tiene el id que hemos recibido como par\xe1metro\n    const proyectoArray = proyectos.filter(p => p.id == id)\n    const proyecto = proyectoArray[0]\n\n    // Modificamos el formato de la fecha quedandonos solo con el yy-mm-dd\n    const fecha = proyecto.created_at\n    const fechaCorta = fecha.split(\'T\')[0]\n\n    // Inyectamos los datos en la vista\n    document.querySelector(\'#imagenJuego\').setAttribute(\'src\', proyecto.imagen)\n    document.querySelector(\'#nombreJuego\').innerHTML = proyecto.nombre\n    document.querySelector(\'#descripcion\').innerHTML = proyecto.descripcion\n    document.querySelector(\'#estado\').innerHTML = proyecto.estado\n    document.querySelector(\'#fecha\').innerHTML = fechaCorta\n    document.querySelector(\'#enlace\').innerHTML = proyecto.enlace\n    document.querySelector(\'#repositorio\').innerHTML = proyecto.repositorio\n\n    // A\xf1adimos el id en data-id al bot\xf3n editar para que al detectar el click podamos llamar a la vista de edici\xf3n pasandole el id en cuesti\xf3n\n    document.querySelector(\'#botonEditarDetalle\').setAttribute(\'data-id\', proyecto.id)\n    \n    // Boton volver atras\n    document.querySelector(\'#botonVolver\').addEventListener(\'click\', () => {\n      window.history.back()\n    })\n\n    // Boton editar\n    document.querySelector(\'#botonEditarDetalle\').addEventListener(\'click\', (e) => {\n      const id = e.target.dataset.id\n      window.location = `#/proyectoEditar/${id}`\n    })\n  }\n}\n\n')),(0,a.kt)("h2",{id:"vista-para-nuevo-proyecto"},"Vista para nuevo proyecto"),(0,a.kt)("p",null,"Esta es a\xfan m\xe1s simple. No hay nada de programaci\xf3n que no hayamos explicado ya con anterioridad."),(0,a.kt)("p",null,"Quiz\xe1 como detalle diferente, podemos ver como en el template incluimos la ejecuci\xf3n de javascript de forma directa, utilizando ${}, para cargar la fecha con el formato apropiado:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript",metastring:"{5}","{5}":!0},'<input \n  id="fecha" \n  type="date" \n  class="form-control" \n  value="${(new Date()).toISOString().split(\'T\')[0]}" \n/>\n\n')),(0,a.kt)("h3",{id:"aqu\xed-tenemos-el-c\xf3digo-completo-de-la-vista"},"Aqu\xed tenemos el c\xf3digo completo de la vista"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="proyectoNuevoVista.js"',title:'"proyectoNuevoVista.js"'},'export default {\n  template: // html\n  `\n  <div class="container">\n  <h1 class="mt-5">Nuevo proyecto</h1>\n  <div class="d-flex justify-content-end">\n    <bottom id="botonVolver" class="btn btn-outline-secondary mt-5 bi bi-arrow-bar-left">\n      Volver</bottom>\n  </div>\n\n  <div class="row mt-2">\n    <div class="col-12 col-md-4 pt-2 mb-3">\n      <img src="images/imagenVacia.png" alt="" class="img-fluid" />\n      <label class="form-label mt-2" for="urlImagen"\n          ><strong>URL imagen: </strong></label\n        >\n        <input\n          id="urlImagen"\n          type="text"\n          class="form-control"\n          value="http://enlaceImagen.com"\n        />\n    </div>\n    <div class="col-12 col-md-8">\n      \x3c!-- Formulario nuevo proyecto --\x3e\n      <form id="formularioNuevoProyecto" action="" class="form" novalidate>\n        \x3c!-- Nombre proyecto --\x3e\n        <label class="form-label" for="nombreJuego"><strong>Nombre: </strong></label>\n        <input\n          required\n          id="nombreJuego"\n          type="text"\n          value=""\n          class="form-control"\n          placeholder="Escribe aqu\xed el nombre del juego"\n        />\n\n        \x3c!-- Descripci\xf3n --\x3e\n        <label class="form-label mt-2" for="descripcion"\n          ><strong>Descripci\xf3n: </strong></label\n        >\n        <textarea \n          id="descripcion" \n          class="form-control" \n          rows="4"\n          placeholder="Descripci\xf3n del juego"\n        ></textarea\n        >\n\n        \x3c!-- Estado --\x3e\n        <label class="form-label mt-2" for="estado"\n          ><strong>Estado: </strong></label\n        >\n        <select required id="estado" class="form-control">\n          <option value="estado">En desarrollo</option>\n          <option value="otro estado">Finalizado</option>\n        </select>\n\n        \x3c!-- Fecha --\x3e\n        <label class="form-label mt-2" for="fecha"\n          ><strong>Fecha: </strong></label\n        >\n        <input \n          id="fecha" \n          type="date" \n          class="form-control" \n          value="${(new Date()).toISOString().split(\'T\')[0]}" \n        />\n\n        \x3c!-- Enlace al proyecto --\x3e\n        <label class="form-label mt-2" for="enlace"\n          ><strong>Enlace: </strong></label\n        >\n        <input\n          id="enlace"\n          type="url"\n          class="form-control"\n          value="http://enlace.com"\n        />\n\n        \x3c!-- Repositorio --\x3e\n        <label class="form-label mt-2" for="repositorio"\n          ><strong>Repositorio: </strong></label\n        >\n        <input\n          id="repositorio"\n          type="text"\n          class="form-control"\n          value="user.github.com/123456"\n        />\n\n        \x3c!-- Submit --\x3e\n        <input\n          type="submit"\n          class="btn btn-success mt-3"\n          value="Subir proyecto"\n        />\n      </form>\n    </div>\n  </div>\n</div>\n  `,\n  script: () => {\n    // Boton volver atras\n    document.querySelector(\'#botonVolver\').addEventListener(\'click\', () => {\n      window.history.back()\n    })\n\n    // Validaci\xf3n bootstrap\n    // Capturamos el formulario en una variable\n    const formulario = document.querySelector(\'#formularioNuevoPRoyecto\')\n    // Detectamos su evento submit (enviar)\n    formulario.addEventListener(\'submit\', (event) => {\n      // Detenemos el evento enviar (submit)\n      event.preventDefault()\n      event.stopPropagation()\n      // Comprobamos si el formulario no valida\n      if (!formulario.checkValidity()) {\n      // Y a\xf1adimos la clase \'was-validate\' para que se muestren los mensajes\n        formulario.classList.add(\'was-validated\')\n      } else {\n        enviaDatos()\n      }\n    })\n\n    // Funci\xf3n para enviar datos a la base de datos\n    function enviaDatos () {\n      const proyectoEditado = {\n        imagen: document.querySelector(\'#urlImagen\').value,\n        nombre: document.querySelector(\'#nombreJuego\').value,\n        descripcion: document.querySelector(\'#descripcion\').value,\n        fecha: document.querySelector(\'#fecha\').value,\n        estado: document.querySelector(\'#estado\').value,\n        enlace: document.querySelector(\'#enlace\').value,\n        repositorio: document.querySelector(\'#repositorio\').value\n      }\n      alert(\'Enviando proyecto a la base de datos\')\n      console.log(\'Enviando a la base de datos \', proyectoEditado)\n    }\n  }\n}\n')),(0,a.kt)("h2",{id:"vista-para-editar-proyecto"},"Vista para editar proyecto"),(0,a.kt)("p",null,"Esta vista es ",(0,a.kt)("strong",{parentName:"p"},"una mezcla entre la vista detalle y la vista para nuevo proyecto"),". "),(0,a.kt)("p",null,"Lo que hacemos cuando llamamos a esta vista, es pasarle el ",(0,a.kt)("strong",{parentName:"p"},"id"),", de manera que cargaremos todos los datos, como en la vista detalle, pero esta vez utilizando un formulario (como en la vista nuevo proyecto)."),(0,a.kt)("h3",{id:"este-ser\xeda-el-c\xf3digo-completo-1"},"Este ser\xeda el c\xf3digo completo"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="proyectoEditarVista"',title:'"proyectoEditarVista"'},'import { proyectos } from \'../bd/datosPrueba\'\n\nexport default {\n  template: // html\n  `\n  <div class="container">\n  <h1 class="mt-5">Edici\xf3n de proyecto</h1>\n  <div class="d-flex justify-content-end">\n    <bottom id="botonVolver" class="btn btn-outline-secondary mt-5 bi bi-arrow-bar-left router-link">\n      Volver</bottom\n    >\n  </div>\n  <form novalidate id="formularioEditarProyecto" action="" class="form">\n    <div class="row mt-2">\n      <div class="col-12 col-md-4 pt-2 mb-3">\n        <img id="imagenJuego" src="images/juego.jpg" alt="" class="img-fluid" />\n        <label class="form-label mt-2" for="urlImagen"\n          ><strong>URL imagen: </strong></label\n        >\n        <input\n          id="urlImagen"\n          type="text"\n          class="form-control"\n          value="http://enlaceImagen.com"\n        />\n        <div class="invalid-feedback">\n          No es una url correcta\n        </div>\n      </div>\n      <div class="col-12 col-md-8">\n        \x3c!-- Formulario nuevo proyecto --\x3e\n\n        \x3c!-- Nombre proyecto --\x3e\n        <label class="form-label" for="nombre"><strong>Nombre: </strong></label>\n        <input\n          required\n          id="nombreJuego"\n          type="text"\n          value="Nombre Autor"\n          class="form-control"\n        />\n        <div class="invalid-feedback">\n          Debe tener un nombre de proyecto\n        </div>\n\n        \x3c!-- Descripci\xf3n --\x3e\n        <label class="form-label mt-2" for="descripcion"\n          ><strong>Descripci\xf3n: </strong></label\n        >\n        <textarea id="descripcion" class="form-control" rows="4">\n          Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium, sunt? Recusandae labore at voluptatem tempore incidunt distinctio eaque? Est aspernatur laudantium itaque ullam numquam autem dolor quia amet eum consectetur.</textarea\n        >\n\n        \x3c!-- Estado --\x3e\n        <label class="form-label mt-2" for="estado"\n          ><strong>Estado: </strong></label\n        >\n        <select required id="estado" class="form-control">\n          <option value="Cerrado">Cerrado</option>  \n          <option value="En desarrollo">En desarrollo</option>\n        </select>\n        <div class="invalid-feedback">\n          Debes definir un estado\n        </div>\n\n        \x3c!-- Fecha --\x3e\n        <label class="form-label mt-2" for="fecha"\n          ><strong>Fecha: </strong></label\n        >\n        <input id="fecha" type="date" class="form-control"  />\n        <div class="invalid-feedback">\n          El formato no es correcto\n        </div>\n\n        \x3c!-- Enlace al proyecto --\x3e\n        <label class="form-label mt-2" for="enlace"\n          ><strong>Enlace: </strong></label\n        >\n        <input\n          id="enlace"\n          type="url"\n          class="form-control"\n          value="http://enlace.com"\n        />\n        <div class="invalid-feedback">\n          No es una url correcta\n        </div>\n\n        \x3c!-- Repositorio --\x3e\n        <label class="form-label mt-2" for="repositorio"\n          ><strong>Repositorio: </strong></label\n        >\n        <input\n          id="repositorio"\n          type="text"\n          class="form-control"\n          value="user.github.com/123456"\n        />\n\n        \x3c!-- Submit --\x3e\n        <input\n          id="subirProyecto"\n          type="submit"\n          class="btn btn-success mt-3"\n          value="Actualizar proyecto"\n        />\n      </div>\n    </div>\n  </form>\n</div>\n  `,\n  script: (id) => {\n    // Simulamos la consulta a un proyecto por id\n    const proyectoArray = proyectos.filter(p => p.id == id)\n    const proyecto = proyectoArray[0]\n\n    // Transformamos la fecha en un formato yy-mm-dd\n    const fecha = proyecto.created_at\n    const fechaCorta = fecha.split(\'T\')[0]\n\n    // Insertamos los datos en el formulario\n    document.querySelector(\'#imagenJuego\').setAttribute(\'src\', proyecto.imagen)\n    document.querySelector(\'#urlImagen\').value = proyecto.imagen\n    document.querySelector(\'#nombreJuego\').value = proyecto.nombre\n    document.querySelector(\'#descripcion\').value = proyecto.descripcion\n    document.querySelector(\'#estado\').value = proyecto.estado\n    document.querySelector(\'#fecha\').value = fechaCorta\n    console.log(fechaCorta)\n    document.querySelector(\'#enlace\').value = proyecto.enlace\n    document.querySelector(\'#repositorio\').value = proyecto.repositorio\n\n    // Boton volver atras\n    document.querySelector(\'#botonVolver\').addEventListener(\'click\', () => {\n      window.history.back()\n    })\n\n    // Actualizaci\xf3n de la imagen a partir de la urlImagen\n    // Capturamos input\n    const inputUrl = document.querySelector(\'#urlImagen\')\n    // Detectamos cambios en su value\n    inputUrl.addEventListener(\'input\', () => {\n      const imagen = document.querySelector(\'#imagenJuego\')\n      // Actualizamos el atributo src y por lo tanto la imagen\n      imagen.setAttribute(\'src\', inputUrl.value)\n    })\n\n    // Validaci\xf3n BOOTSTRAP\n    // Capturamos el formulario en una variable\n    const formulario = document.querySelector(\'#formularioEditarProyecto\')\n    // Detectamos su evento submit (enviar)\n    formulario.addEventListener(\'submit\', (event) => {\n      // Detenemos el evento enviar (submit)\n      event.preventDefault()\n      event.stopPropagation()\n      // Comprobamos si el formulario no valida\n      if (!formulario.checkValidity()) {\n        // Y a\xf1adimos la clase \'was-validate\' para que se muestren los mensajes\n        formulario.classList.add(\'was-validated\')\n      } else {\n        //* ** ENVIAMOS DATOS A LA BASE DE DATOS */\n        enviaDatos()\n      }\n    })\n\n    // Funci\xf3n para enviar datos a la base de datos\n    function enviaDatos () {\n      const proyectoEditado = {\n        imagen: document.querySelector(\'#urlImagen\').value,\n        nombre: document.querySelector(\'#nombreJuego\').value,\n        descripcion: document.querySelector(\'#descripcion\').value,\n        estado: document.querySelector(\'#estado\').value,\n        enlace: document.querySelector(\'#enlace\').value,\n        repositorio: document.querySelector(\'#repositorio\').value\n      }\n      alert(`Enviando a la base de datos el objeto con id = ${proyecto.id}`)\n      console.log(`Enviando a la base de datos el objeto con id = ${proyecto.id}`, proyectoEditado)\n    }\n  }\n}\n\n')),(0,a.kt)("h2",{id:"hemos-terminado"},"\xbfHemos terminado?"),(0,a.kt)("p",null,"La \xfanica vista que nos queda por actualizar ser\xeda la de registro, pero no tiene mucho sentido ya que a\xfan no hemos conectado nuestro frond-end con el back-end."),(0,a.kt)("admonition",{title:"Commit y pullrequest \xa1pero ya!",type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"Para cerrar este sprint, vamos a subir todos los cambios a nuestro repositorio y luego ya podemos hacer merge de la rama 'logica-para-vistas' a la rama 'main' mediante un PullRequest."),(0,a.kt)("p",{parentName:"admonition"},"Despu\xe9s, nos situamos en la rama 'main' y la actualizamos el repositorio local."),(0,a.kt)("p",{parentName:"admonition"},"Y finalmente, hacemos ",(0,a.kt)("inlineCode",{parentName:"p"},"npm run build")," para actualizar nuestra carpeta ",(0,a.kt)("inlineCode",{parentName:"p"},"dist"),"con el resultado del proyecto, y ",(0,a.kt)("inlineCode",{parentName:"p"},"npm run deploy")," para subir a nuestro servidor de producci\xf3n de prueba.")),(0,a.kt)("p",null,"Si todo est\xe1 ok, en el navegador deber\xedamos ver nuestra app funcionando correctamente..."),(0,a.kt)("p",null,"Y aqu\xed acabamos este pedazo de sprint en el que nos hemos tenido que emplear a fondo con javascript. \xa1\xa1\xa1F\xedjate todo el trabajo que llevamos hecho!!!"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"gitgraph",src:n(2320).Z,width:"900",height:"968"})),(0,a.kt)("p",null,"En el pr\xf3ximo sprint nos va a tocar ",(0,a.kt)("strong",{parentName:"p"},"reunirnos con nuestro yo-backend")," y ver en que punto estamos para, juntos, programar la l\xf3gica correspondiente a la ",(0,a.kt)("strong",{parentName:"p"},"capa de abstracci\xf3n")," en la que tendremos las ",(0,a.kt)("strong",{parentName:"p"},"clases que nos permitir\xe1n conectarnos con la base de datos de supabase"),"."),(0,a.kt)("p",null,"\xa1Oh yeah...! \ud83d\ude0e"))}u.isMDXComponent=!0},2320:(e,o,n)=>{n.d(o,{Z:()=>t});const t=n.p+"assets/images/gitgraph2-a774d13df143e3f73e7e1e30b56270eb.png"}}]);