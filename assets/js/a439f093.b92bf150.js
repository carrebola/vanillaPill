"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8811],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>b});var r=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=r.createContext({}),c=function(e){var a=r.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):s(s({},a),e)),t},p=function(e){var a=c(e.components);return r.createElement(l.Provider,{value:a},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(t),m=n,b=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return t?r.createElement(b,s(s({ref:a},p),{},{components:t})):r.createElement(b,s({ref:a},p))}));function b(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=t.length,s=new Array(o);s[0]=m;var i={};for(var l in a)hasOwnProperty.call(a,l)&&(i[l]=a[l]);i.originalType=e,i[d]="string"==typeof e?e:n,s[1]=i;for(var c=2;c<o;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3137:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=t(7462),n=(t(7294),t(3905));const o={title:"La API de Javascript de Supabase"},s=void 0,i={unversionedId:"Version 1.0/SPRINT 4 - BACKEND/Probando Supabase con Javascript/API javascript",id:"Version 1.0/SPRINT 4 - BACKEND/Probando Supabase con Javascript/API javascript",title:"La API de Javascript de Supabase",description:"Una de las grandes ventajas que nos ofrece Supabase es que, no solo nos ofrece un servidor de base de datos basado en postgreeSQL, sino que adem\xe1s nos facilita enormemente el acceso a la bd, ya sea a trav\xe9s de una API Rest, o directamente con una API de javascript.",source:"@site/docs/03-Version 1.0/SPRINT 4 - BACKEND/06-Probando Supabase con Javascript/01-API javascript.md",sourceDirName:"03-Version 1.0/SPRINT 4 - BACKEND/06-Probando Supabase con Javascript",slug:"/Version 1.0/SPRINT 4 - BACKEND/Probando Supabase con Javascript/API javascript",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Probando Supabase con Javascript/API javascript",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-Version 1.0/SPRINT 4 - BACKEND/06-Probando Supabase con Javascript/01-API javascript.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"La API de Javascript de Supabase"},sidebar:"tutorialSidebar",previous:{title:"Construcci\xf3n de tablas y usuarios",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Construcci\xf3n de tablas y usuarios"},next:{title:"Funciones en Supabase. Las Stored Procedures",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Probando Supabase con Javascript/Stored Procedures"}},l={},c=[{value:"Acceso a la documentaci\xf3n de la API de Javascript",id:"acceso-a-la-documentaci\xf3n-de-la-api-de-javascript",level:2},{value:"Ejemplos de c\xf3digo javascript que nos ofrece Supabase:",id:"ejemplos-de-c\xf3digo-javascript-que-nos-ofrece-supabase",level:3}],p={toc:c},d="wrapper";function u(e){let{components:a,...o}=e;return(0,n.kt)(d,(0,r.Z)({},p,o,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Una de las grandes ventajas que nos ofrece Supabase es que, no solo nos ofrece un servidor de base de datos basado en postgreeSQL, sino que adem\xe1s nos facilita enormemente el acceso a la bd, ya sea a trav\xe9s de una API Rest, o directamente con una API de javascript."),(0,n.kt)("admonition",{title:"API REST vs API de Javascript",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"La diferencia fundamental entre la API REST de Supabase y su API de JavaScript radica en c\xf3mo interact\xfaan los desarrolladores con la plataforma:"),(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("strong",{parentName:"p"},"API REST de Supabase:"),"\nLa API REST es una interfaz que sigue los principios de la arquitectura REST (Representational State Transfer). Permite a los desarrolladores realizar operaciones CRUD (Create, Read, Update, Delete) en la base de datos de Supabase utilizando los m\xe9todos HTTP est\xe1ndar (GET, POST, PUT, DELETE, etc.). Para interactuar con la API REST, puedes hacer solicitudes HTTP directas utilizando bibliotecas como Axios, Fetch, o incluso a trav\xe9s de herramientas como cURL."),(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("strong",{parentName:"p"},"API de JavaScript de Supabase:"),"\nLa API de JavaScript de Supabase es una biblioteca que proporciona una capa de abstracci\xf3n sobre la API REST subyacente. Esta biblioteca simplifica la interacci\xf3n con la API REST al proporcionar m\xe9todos y funciones espec\xedficos en JavaScript para realizar operaciones comunes en la base de datos de Supabase. En lugar de realizar directamente solicitudes HTTP, los desarrolladores pueden utilizar estas funciones para realizar tareas como la autenticaci\xf3n de usuarios, la consulta de datos, la manipulaci\xf3n de datos, etc."),(0,n.kt)("p",{parentName:"admonition"},"En resumen, ",(0,n.kt)("strong",{parentName:"p"},"la API REST de Supabase")," es la interfaz subyacente que permite la comunicaci\xf3n con la plataforma utilizando ",(0,n.kt)("strong",{parentName:"p"},"solicitudes HTTP est\xe1ndar"),", mientras que ",(0,n.kt)("strong",{parentName:"p"},"la API de JavaScript de Supabase")," es una biblioteca que facilita la interacci\xf3n con la API REST utilizando ",(0,n.kt)("strong",{parentName:"p"},"m\xe9todos y funciones espec\xedficos en JavaScript"),". ")),(0,n.kt)("p",null,"Para nuestro proyecto nosotros vamos a utilizar la ",(0,n.kt)("strong",{parentName:"p"},"API de Javascript")," ya que nos permite la comunicaci\xf3n de manera muy sencilla ya adem\xe1s, \xa1nos lo dan todo hecho! \ud83d\ude09"),(0,n.kt)("h2",{id:"acceso-a-la-documentaci\xf3n-de-la-api-de-javascript"},"Acceso a la documentaci\xf3n de la API de Javascript"),(0,n.kt)("p",null,"Para acceder a la documentaci\xf3n de javascript tenemos que hacer click en el item del men\xfa de la barra de la izquierda llamado ",(0,n.kt)("strong",{parentName:"p"},"API Docs"),". (Antes debes estar en tu proyecto)"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"API Docs",src:t(8502).Z,width:"941",height:"358"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"En el apartado ",(0,n.kt)("strong",{parentName:"p"},"Getting Started")," encontramos varias opciones:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"En la opci\xf3n ",(0,n.kt)("strong",{parentName:"p"},"Introductio")," nos muestra el c\xf3digo para realizar la conexi\xf3n con la base de datos (luego lo probaremos).")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"En la opci\xf3n de ",(0,n.kt)("strong",{parentName:"p"},"Authentication")," nos muestra informaci\xf3n relacionada con la autenticaci\xf3n de la base de datos.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"En la opci\xf3n ",(0,n.kt)("strong",{parentName:"p"},"User Management")," ya encontramos el c\xf3digo javascript que debemos utilizar en nuestra app para hacer tareas como el ",(0,n.kt)("strong",{parentName:"p"},"registro"),", ",(0,n.kt)("strong",{parentName:"p"},"login")," (con diferentes sistemas), ",(0,n.kt)("em",{parentName:"p"},"logout"),", y ",(0,n.kt)("strong",{parentName:"p"},"acceder a la informaci\xf3n del usuario")," con la sesi\xf3n activa, entre otros.")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Tenemos otra secci\xf3n llamada ",(0,n.kt)("strong",{parentName:"p"},"Tables and Views"),": Aqu\xed aparecer\xe1n todas las tablas de nuestro proyecto. Si hacemos click en uno de los nombres de las tablas, por ejemplo, en la tabla ",(0,n.kt)("em",{parentName:"p"},"pefiles"),", veremos en la columna de la derecha el c\xf3digo javascript asociado a las diferentes consultas."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Podemos acceder a un perfil a partir de su id, fecha, nombre, etc. "),(0,n.kt)("li",{parentName:"ul"},"Leer todas los perfiles (incluyendo filtros), "),(0,n.kt)("li",{parentName:"ul"},"insertar perfiles, "),(0,n.kt)("li",{parentName:"ul"},"actualizar perfiles y "),(0,n.kt)("li",{parentName:"ul"},"borrarlos.\nEs decir, el CRUD que hemos contemplado en nuestro ORM.")))),(0,n.kt)("p",null,"Parece f\xe1cil, \xbfverdad? ... Pues lo es. En breve lo probaremos."),(0,n.kt)("p",null,"Pero hay algo que hemos pasado por alto. Si revisamos el diagrama de clases podemos ver que hay m\xe9todos (como getDetalleById de la clase Perfil_detalle) que realizan consultas multitabla. Si analizamos el c\xf3digo js que acabamos de ver en la documentaci\xf3n, solo contempla consultas a la m\xedsma tabla... \xbfC\xf3mo podemos solucionar este problema?"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Diagrama da de clases",src:t(3732).Z,width:"1252",height:"554"})),(0,n.kt)("p",null,"La respuesta a esta pregunta es: utilizando funciones postgreSQL conocidas como ",(0,n.kt)("strong",{parentName:"p"},"Stored Procedures"),"."),(0,n.kt)("p",null,"Efectivamente, en supabase podemos crear funciones que m\xe1s tarde podremos llamar desde javascript."),(0,n.kt)("h3",{id:"ejemplos-de-c\xf3digo-javascript-que-nos-ofrece-supabase"},"Ejemplos de c\xf3digo javascript que nos ofrece Supabase:"),(0,n.kt)("p",null,"Vamos a mostrar aqu\xed, a modo de ejemplo, el c\xf3digo para:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Iniciar sesi\xf3n "),(0,n.kt)("li",{parentName:"ul"},"acceder a todas las filas de la tabla pefiles"),(0,n.kt)("li",{parentName:"ul"},"acceder a una funci\xf3n predefinida llamada perfiles_detalle (esta en concreto permitir\xeda ver el detalle de todas las filas de la tabla perfiles cruzada con la tabla usuarios)")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Estos fragmentos de c\xf3digo los puedes encontrar en API Docs de supabase")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Iniciar sesi\xf3n"',title:'"Iniciar','sesi\xf3n"':!0},"// USER LOGIN\nlet { data, error } = await supabase.auth.signInWithPassword({\n email: 'someone@email.com',\n password: 'TGeycKCsmEIyrHPhWiYF'\n})\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-JS",metastring:'title="Leer todas las filas de la tabla perfiles"',title:'"Leer',todas:!0,las:!0,filas:!0,de:!0,la:!0,tabla:!0,'perfiles"':!0},"// READ ALL ROWS\nlet { data: perfiles, error } = await supabase\n .from('perfiles')\n .select('*')\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Stored Procedures: perfil_detalle"',title:'"Stored',"Procedures:":!0,'perfil_detalle"':!0},"// INVOKE FUNCTION\nlet { data, error } = await supabase\n.rpc('perfil_detalle', {\n  userid\n})\n\nif (error) console.error(error)\nelse console.log(data)\n")),(0,n.kt)("p",null,"Tanto el c\xf3digo para leer las filas de la tabla perfiles, como el de inicio de sesi\xf3n, podr\xedamos utilizarlos ya en nuestra aplicaci\xf3n, pero en el caso de la funci\xf3n ",(0,n.kt)("strong",{parentName:"p"},"perfil_detalle"),", primero necesitamos programarla desde Supabase. \xa1Hag\xe1moslo!"))}u.isMDXComponent=!0},8502:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/api-d702a070f87f2d9b66a634fa6923a0d2.png"},3732:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/dc-1b2b47904518da02ba6c90fd8ef20e38.svg"}}]);