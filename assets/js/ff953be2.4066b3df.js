"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8298],{3905:(a,e,t)=>{t.d(e,{Zo:()=>c,kt:()=>b});var r=t(7294);function i(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function l(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.push.apply(t,r)}return t}function o(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l(Object(t),!0).forEach((function(e){i(a,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}))}return a}function n(a,e){if(null==a)return{};var t,r,i=function(a,e){if(null==a)return{};var t,r,i={},l=Object.keys(a);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||(i[t]=a[t]);return i}(a,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(a,t)&&(i[t]=a[t])}return i}var s=r.createContext({}),p=function(a){var e=r.useContext(s),t=e;return a&&(t="function"==typeof a?a(e):o(o({},e),a)),t},c=function(a){var e=p(a.components);return r.createElement(s.Provider,{value:e},a.children)},u="mdxType",d={inlineCode:"code",wrapper:function(a){var e=a.children;return r.createElement(r.Fragment,{},e)}},m=r.forwardRef((function(a,e){var t=a.components,i=a.mdxType,l=a.originalType,s=a.parentName,c=n(a,["components","mdxType","originalType","parentName"]),u=p(t),m=i,b=u["".concat(s,".").concat(m)]||u[m]||d[m]||l;return t?r.createElement(b,o(o({ref:e},c),{},{components:t})):r.createElement(b,o({ref:e},c))}));function b(a,e){var t=arguments,i=e&&e.mdxType;if("string"==typeof a||i){var l=t.length,o=new Array(l);o[0]=m;var n={};for(var s in e)hasOwnProperty.call(e,s)&&(n[s]=e[s]);n.originalType=a,n[u]="string"==typeof a?a:i,o[1]=n;for(var p=2;p<l;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2103:(a,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>n,toc:()=>p});var r=t(7462),i=(t(7294),t(3905));const l={sidebar_position:80},o="Historia 6: Supabase. Gesti\xf3n de permisos. Pruebas III (API DOCS)",n={unversionedId:"Version 1.0/SPRINT 4 - BACKEND/Supabase/h6",id:"Version 1.0/SPRINT 4 - BACKEND/Supabase/h6",title:"Historia 6: Supabase. Gesti\xf3n de permisos. Pruebas III (API DOCS)",description:"Como desarrollador backEnd quiero probar las pol\xedticas de privacidad asociadas a las tablas en funci\xf3n del rol de cada usuario.",source:"@site/docs/03-Version 1.0/SPRINT 4 - BACKEND/10-Supabase/h6.md",sourceDirName:"03-Version 1.0/SPRINT 4 - BACKEND/10-Supabase",slug:"/Version 1.0/SPRINT 4 - BACKEND/Supabase/h6",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Supabase/h6",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-Version 1.0/SPRINT 4 - BACKEND/10-Supabase/h6.md",tags:[],version:"current",sidebarPosition:80,frontMatter:{sidebar_position:80},sidebar:"tutorialSidebar",previous:{title:"Historia 5: Supabase. Configuraci\xf3n de Triggers",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Supabase/h5"},next:{title:"Historia 6b. Supabase. Storage para la Gesti\xf3n de archivos. Pruebas IV (APIU DOCS)",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Supabase/h6b"}},s={},p=[{value:"Tarea 1: Definici\xf3n de las politicas para cada tabla",id:"tarea-1-definici\xf3n-de-las-politicas-para-cada-tabla",level:2},{value:"Tabla perfiles",id:"tabla-perfiles",level:3},{value:"Tabla proyectos",id:"tabla-proyectos",level:3},{value:"Tabla comentarios",id:"tabla-comentarios",level:3},{value:"Tarea 3 - Pruebas",id:"tarea-3---pruebas",level:2}],c={toc:p},u="wrapper";function d(a){let{components:e,...l}=a;return(0,i.kt)(u,(0,r.Z)({},c,l,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"historia-6-supabase-gesti\xf3n-de-permisos-pruebas-iii-api-docs"},"Historia 6: Supabase. Gesti\xf3n de permisos. Pruebas III (API DOCS)"),(0,i.kt)("p",null,"Como desarrollador backEnd quiero probar las pol\xedticas de privacidad asociadas a las tablas en funci\xf3n del rol de cada usuario."),(0,i.kt)("h2",{id:"tarea-1-definici\xf3n-de-las-politicas-para-cada-tabla"},"Tarea 1: Definici\xf3n de las politicas para cada tabla"),(0,i.kt)("p",null,"En primer lugar definimos algunos permisos a modo de prueba:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"tabla perfiles:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"lectura: solo usuarios con rol 'admin'"))),(0,i.kt)("li",{parentName:"ul"},"tabla proyectos: ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"lectura:  p\xfablica"),(0,i.kt)("li",{parentName:"ul"},"inserci\xf3n: permitido para roles alumno y admin"),(0,i.kt)("li",{parentName:"ul"},"actualizaci\xf3n: permitido para roles admin y alumno (solo puede editar el proyecto que ha publicado ese usuario)"))),(0,i.kt)("li",{parentName:"ul"},"tabla comentarios: ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"lectura: permitido para roles registrado y admin"),(0,i.kt)("li",{parentName:"ul"},"inserci\xf3n: permitido para roles registrado y admin")))),(0,i.kt)("h3",{id:"tabla-perfiles"},"Tabla perfiles"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"En primer lugar habilitaremos las RLS"),(0,i.kt)("li",{parentName:"ul"},"Creamos una ",(0,i.kt)("strong",{parentName:"li"},"politica de lectura")," para usuarios con rol admin")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"politicalectura",src:t(9726).Z,width:"1055",height:"692"})),(0,i.kt)("h3",{id:"tabla-proyectos"},"Tabla proyectos"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"En primer lugar habilitaremos las RLS"),(0,i.kt)("li",{parentName:"ul"},"Creamos una ",(0,i.kt)("strong",{parentName:"li"},"politica de lectura")," para cualquier usuario a partir de las plantillas")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"politicalectura",src:t(8866).Z,width:"1030",height:"472"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Ahora creamos la ",(0,i.kt)("strong",{parentName:"li"},"politica de inserci\xf3n")," solo para usuarios cuyo campo rol sea ",(0,i.kt)("strong",{parentName:"li"},"alumno")," o ",(0,i.kt)("strong",{parentName:"li"},"admin"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"politicalectura",src:t(3428).Z,width:"1037",height:"582"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Para acabar creamos la ",(0,i.kt)("strong",{parentName:"li"},"politica de update solo para los proyectos que ha creado el propio usuario"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"politicalectura",src:t(9954).Z,width:"1040",height:"583"})),(0,i.kt)("h3",{id:"tabla-comentarios"},"Tabla comentarios"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"En primer lugar habilitaremos las RLS"),(0,i.kt)("li",{parentName:"ul"},"Creamos una ",(0,i.kt)("strong",{parentName:"li"},"politica de lectura")," para usuarios registrados")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Creamos una ",(0,i.kt)("strong",{parentName:"li"},"politica de escritura")," para usuarios registrados")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"politicalectura",src:t(3489).Z,width:"1044",height:"681"})),(0,i.kt)("h2",{id:"tarea-3---pruebas"},"Tarea 3 - Pruebas"),(0,i.kt)("p",null,"Ahora ya tenemos las primeras pol\xedticas creadas. Vamos a hacer algunas pruebas desde nuestra aplicaci\xf3n"))}d.isMDXComponent=!0},3489:(a,e,t)=>{t.d(e,{Z:()=>r});const r=t.p+"assets/images/politicaescrituracomentariosautenticado-48236eaa4d5dc193b42c5b4956dc7eca.png"},3428:(a,e,t)=>{t.d(e,{Z:()=>r});const r=t.p+"assets/images/politicainsercionproyectos-cc410ff39c682741cb1cc630c66e1a76.png"},9726:(a,e,t)=>{t.d(e,{Z:()=>r});const r=t.p+"assets/images/politicalecturaperfilesadmin-e3bad00f53c48382c9df381bf30c34b3.png"},8866:(a,e,t)=>{t.d(e,{Z:()=>r});const r=t.p+"assets/images/politicalecturapublica-d5708692ec459963fb93cff29f0c306e.png"},9954:(a,e,t)=>{t.d(e,{Z:()=>r});const r=t.p+"assets/images/politicaupdateproyectos-676b4cbccae2d137d0ded5fe972af5fd.png"}}]);