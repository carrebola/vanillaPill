"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5579],{3905:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>g});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=t.createContext({}),p=function(e){var a=t.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},c=function(e){var a=p(e.components);return t.createElement(l.Provider,{value:a},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||o;return n?t.createElement(g,i(i({ref:a},c),{},{components:n})):t.createElement(g,i({ref:a},c))}));function g(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2883:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var t=n(7462),r=(n(7294),n(3905));const o={sidebar_position:4},i="Historia 2: FrontEnd basado en vite. Integraci\xf3n continua y Despliegue continuo",s={unversionedId:"h2",id:"h2",title:"Historia 2: FrontEnd basado en vite. Integraci\xf3n continua y Despliegue continuo",description:"Como desarrollador quiero crear una infraestructura b\xe1sica para la creaci\xf3n del proyecto basada en vite. Adem\xe1s quiero crear un repositorio y publicarlo en github y desplegar la app en github pages.",source:"@site/docs/h2.md",sourceDirName:".",slug:"/h2",permalink:"/vanillaPill/docs/h2",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/h2.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Historia 1: BackEnd basado en SUPABASE",permalink:"/vanillaPill/docs/h1"},next:{title:"Historia 3: Conexi\xf3n asincrona con el servicio backend de supabase. Pruebas",permalink:"/vanillaPill/docs/h3"}},l={},p=[{value:"Tarea 1 Creaci\xf3n del proyecto con vite",id:"tarea1",level:3},{value:"Tarea 2 Scaffolding",id:"tarea-2-scaffolding",level:3},{value:"Tarea 3 -  Vite.config.js",id:"tarea-3----viteconfigjs",level:2},{value:"Tarea 4 - Boostrap y SASS",id:"tarea-4---boostrap-y-sass",level:2},{value:"Tarea 5 Repositorio despliegue en GitHub Pages",id:"tarea-5-repositorio-despliegue-en-github-pages",level:2}],c={toc:p},u="wrapper";function m(e){let{components:a,...n}=e;return(0,r.kt)(u,(0,t.Z)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"historia-2-frontend-basado-en-vite-integraci\xf3n-continua-y-despliegue-continuo"},"Historia 2: FrontEnd basado en vite. Integraci\xf3n continua y Despliegue continuo"),(0,r.kt)("p",null,"Como desarrollador quiero crear una infraestructura b\xe1sica para la creaci\xf3n del proyecto basada en vite. Adem\xe1s quiero crear un repositorio y publicarlo en github y desplegar la app en github pages."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Crearemos un proyecto html/javascript con bootstrap y sass utilizando vite"),(0,r.kt)("li",{parentName:"ol"},"Creamos el scaffolding de nuestro proyecto con algunos 'componentes' b\xe1sicos."),(0,r.kt)("li",{parentName:"ol"},"Crearemos archivo vite.config y verificamos que todo funciona de forma correcta"),(0,r.kt)("li",{parentName:"ol"},"Crearemos un repositorio y una rama de desarrollo y lo sincronizaremos con GitHub."),(0,r.kt)("li",{parentName:"ol"},"Crearemos un sistema de despliegue continuo basado en GitHub mediante gh-pages."),(0,r.kt)("li",{parentName:"ol"},"Crearemos una p\xe1gina b\xe1sica con una tabla para mostrar los datos de los perfiles de usuarios."),(0,r.kt)("li",{parentName:"ol"},"Programaremos la l\xf3gica para realizar la conexi\xf3n con la base de datos y  mostrar los datos de la tabla perfiles")),(0,r.kt)("h3",{id:"tarea1"},"Tarea 1 Creaci\xf3n del proyecto con vite"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Creamos una carpeta con nuestro proyecto y lo abrimos con vscode"),(0,r.kt)("li",{parentName:"ul"},"Creamos un proyecto con vite     ",(0,r.kt)("inlineCode",{parentName:"li"},"npm create vite@latest . ")),(0,r.kt)("li",{parentName:"ul"},"Instalamos las dependencias ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install")),(0,r.kt)("li",{parentName:"ul"},"Y levantamos el servidor de pruebas ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run dev"))),(0,r.kt)("h3",{id:"tarea-2-scaffolding"},"Tarea 2 Scaffolding"),(0,r.kt)("p",null,"Ahora que todo funciona bien, vamos a contruir la estructura del proyecto con la vista principal y algunos objetos a modo de componentes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Eliminamos los archivos de muestrea y creamos una estructura de carpetas como la siguiente:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"        node_modules  \n        src\n            componentes\n                header.js\n                footer.js\n            vistas\n                home.js\n            index.html \n            main.js\n        .gitignore  \n        package.json  \n        package-lock.json  \n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Modificamos index.html para que solo tenga las etiquetas header, main y footer y enlazamos el archivo main.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="index.html"',title:'"index.html"'},'        <!DOCTYPE html>\n        <html lang="es">\n          <head>\n            <meta charset="UTF-8" />\n            <link rel="icon" type="image/svg+xml" href="/vite.svg" />\n            <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n            <title>Proyecto</title>\n          </head>\n          <body>\n            <header></header>\n            <main></main>\n            <footer></footer>\n            <script type="module" src="/main.js"><\/script>\n          </body>\n        </html>\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Creamos la vista principal y los componentes header y footer con un 'template' b\xe1sico")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="home.js"',title:'"home.js"'},"        export const home = {\n            template: `<h1>home</h1>`\n        }\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="header.js"',title:'"header.js"'},"        export const header = {\n            template: `header`\n        }\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"En main.js importamos los componentes header y footer y los inyectamos en sus etiquetas correspondients. Tambi\xe9n cargamos la vista home.js en la etiqueta main")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="home.js"',title:'"home.js"'},"        import './style.css'\n        import { header } from './componentes/header'\n        import { footer } from './componentes/footer'\n        import { home } from './vistas/home'\n\n        document.querySelector('header').innerHTML = header.template\n        document.querySelector('main').innerHTML = home.template\n        document.querySelector('footer').innerHTML = footer.template\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ahora solo falta configurar vite para que sepa donde buscar los archivos index.html y main.js")),(0,r.kt)("h2",{id:"tarea-3----viteconfigjs"},"Tarea 3 -  Vite.config.js"),(0,r.kt)("p",null,"Cramos el archivo vite.config.js"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="vite.config.js"',title:'"vite.config.js"'},"import path from 'path'\n\nexport default {\n  root: path.resolve(__dirname, 'src'), // Carpeta donde alojamos el archivo main.js\n  \n  build: {\n    rollupOptions: {\n        /*\n            Opciones de configuraci\xf3n de Rollup externas, ser\xe1n mergeadas con la configuracion\n            interna de Rollup de Vite.\n        */\n        input: {\n            main: path.resolve(__dirname, 'src/index.html'), // Indicamos las p\xe1ginas que debe analizar\n        },\n        output: {\n            dir: path.resolve(__dirname, 'dist'), //Donde se va a crear el build de nuestra aplicacion\n            format: 'es', //Formato de ES modules\n        },\n    },\n    outDir: path.resolve(__dirname, 'dist'),\n    minify: false, //( Si no se quiere minificar el build) https://vitejs.dev/config/#build-minify (aplica solo a los JS no CSS)\n},\n  server: {\n    port: 8080,\n    hot: true\n  }\n}\n")),(0,r.kt)("h2",{id:"tarea-4---boostrap-y-sass"},"Tarea 4 - Boostrap y SASS"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Instalamos boostrap y sass ",(0,r.kt)("inlineCode",{parentName:"li"},"npm i bootstrap @popperjs/core")," ",(0,r.kt)("inlineCode",{parentName:"li"},"npm i sass -D")),(0,r.kt)("li",{parentName:"ul"},"Creamos la carpeta scss y dentro creamos el archivo styles.scss "),(0,r.kt)("li",{parentName:"ul"},"Modificamos el archivo vite.config.js para que se procese sass a\xf1adiendo la siguiente linea:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"alias: {\n      '~bootstrap': path.resolve(__dirname, 'node_modules/bootstrap'),\n    }\n")),(0,r.kt)("p",null,"El archivo vite.config.js quedar\xeda as\xed:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="vite.config.js"',title:'"vite.config.js"'},"import path from 'path'\n\nexport default {\n  root: path.resolve(__dirname, 'src'), // Carpeta donde alojamos el archivo main.js\n  resolve: {\n    alias: {\n      '~bootstrap': path.resolve(__dirname, 'node_modules/bootstrap'),\n    }\n  },\n  build: {\n    rollupOptions: {\n        /*\n            Opciones de configuraci\xf3n de Rollup externas, ser\xe1n mergeadas con la configuracion\n            interna de Rollup de Vite.\n        */\n        input: {\n            main: path.resolve(__dirname, 'src/index.html'), // Indicamos las p\xe1ginas que debe analizar\n        },\n        output: {\n            dir: path.resolve(__dirname, 'dist'), //Donde se va a crear el build de nuestra aplicacion\n            format: 'es', //Formato de ES modules\n        },\n    },\n    outDir: path.resolve(__dirname, 'dist'),\n    minify: false, //( Si no se quiere minificar el build) https://vitejs.dev/config/#build-minify (aplica solo a los JS no CSS)\n},\n  server: {\n    port: 8080,\n    hot: true\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"En el archivo styles.scss cargamos bootstrap")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="styles.scss"',title:'"styles.scss"'},'// Import all of Bootstrap\'s CSS\n@import "~bootstrap/scss/bootstrap";\n\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Finalmente a\xf1adimos la libreria boostrap en el archivo main.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="main.js"',title:'"main.js"'},"// Import our custom CSS\nimport './scss/styles.scss'\n\n// Import all of Bootstrap's JS\nimport * as bootstrap from 'bootstrap'\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ejecutamos nuestro proyecto para verificar que todo est\xe1 ok mediante ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run dev"))),(0,r.kt)("h2",{id:"tarea-5-repositorio-despliegue-en-github-pages"},"Tarea 5 Repositorio despliegue en GitHub Pages"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Continuamos configurando el archivo vite.config.js para que al generar las p\xe1ginas minificadas en la carpeta dist, las urls comiencen con ",(0,r.kt)("inlineCode",{parentName:"li"},"./"),". Para ello a\xf1adimos el c\xf3digo: ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"base: './'\n")),(0,r.kt)("p",null,"Nuestro archivo vite.config.js quedar\xeda as\xed:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="vite.config.js"',title:'"vite.config.js"'},"import path from 'path'\n\nexport default {\n  root: path.resolve(__dirname, 'src'), // Carpeta donde alojamos el archivo main.js\n  base: './',\n  resolve: {\n    alias: {\n      '~bootstrap': path.resolve(__dirname, 'node_modules/bootstrap'),\n    }\n  },\n  build: {\n    rollupOptions: {\n        /*\n            Opciones de configuraci\xf3n de Rollup externas, ser\xe1n mergeadas con la configuracion\n            interna de Rollup de Vite.\n        */\n        input: {\n            main: path.resolve(__dirname, 'src/index.html'), // Indicamos las p\xe1ginas que debe analizar\n        },\n        output: {\n            dir: path.resolve(__dirname, 'dist'), //Donde se va a crear el build de nuestra aplicacion\n            format: 'es', //Formato de ES modules\n        },\n    },\n    outDir: path.resolve(__dirname, 'dist'),\n    minify: false, //( Si no se quiere minificar el build) https://vitejs.dev/config/#build-minify (aplica solo a los JS no CSS)\n},\n  server: {\n    port: 8080,\n    hot: true\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Verificamos que se genera la carpeta ",(0,r.kt)("strong",{parentName:"li"},"dist")," con los archivos minificados mediante ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run build")),(0,r.kt)("li",{parentName:"ul"},"Comprobamos que los archivos generados se muestran correctamente en el navegador (podemos utilizar el plugin ",(0,r.kt)("inlineCode",{parentName:"li"},"virtual server")," de vscode)"),(0,r.kt)("li",{parentName:"ul"},"Creamos un repositorio de git para el proyecto y lo sincronizamos con github (para ello utilizamos las herramientas de vscode)"),(0,r.kt)("li",{parentName:"ul"},"Instalamos gh-pages con ",(0,r.kt)("inlineCode",{parentName:"li"},"npm i gh-pages -D")),(0,r.kt)("li",{parentName:"ul"},"Ahora creamos, en el package.json, el script ",(0,r.kt)("strong",{parentName:"li"},"deploy")," necesario para poder ejecturar el deploy a gh pages.\nTambien hemos a\xf1adido la propiedad ",(0,r.kt)("inlineCode",{parentName:"li"},"--emptyOutDir")," a script ",(0,r.kt)("strong",{parentName:"li"},"build")," para que la sobreescritura se realice correctamente\nEl archivo quedar\xeda as\xed: ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "name": "trabajos_alumnos",\n  "private": true,\n  "version": "0.0.0",\n  "type": "module",\n  "scripts": {\n    "dev": "vite",\n    "build": "vite build --emptyOutDir",\n    "preview": "vite preview",\n    "deploy": "gh-pages -d dist"\n  },\n  "devDependencies": {\n    "gh-pages": "^5.0.0",\n    "sass": "^1.58.3",\n    "vite": "^4.1.0"\n  },\n  "dependencies": {\n    "@popperjs/core": "^2.11.6",\n    "bootstrap": "^5.2.3"\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ahora ya podemos ejecutar ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run build")," para contruir nuestra carpeta ",(0,r.kt)("strong",{parentName:"li"},"dist")," y a continuaci\xf3n ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run deploy")," para que se cree la rama gh-pages y se publique."),(0,r.kt)("li",{parentName:"ul"},"Finalmente, vamos a la secci\xf3n ",(0,r.kt)("em",{parentName:"li"},"Pages")," del repositorio para comprobar que url se ha asignado para el despliegue y verificamos que efectivamente tenemos nuestro proyecto en la web. (A veces tarda unos minutos en actualizarse en GitHub, ten paciencia...)")))}m.isMDXComponent=!0}}]);