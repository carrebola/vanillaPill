"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6195],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>k});var r=t(7294);function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function n(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,r,s=function(e,a){if(null==e)return{};var t,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var i=r.createContext({}),p=function(e){var a=r.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):n(n({},a),e)),t},c=function(e){var a=p(e.components);return r.createElement(i.Provider,{value:a},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var t=e.components,s=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(t),m=s,k=d["".concat(i,".").concat(m)]||d[m]||u[m]||o;return t?r.createElement(k,n(n({ref:a},c),{},{components:t})):r.createElement(k,n({ref:a},c))}));function k(e,a){var t=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var o=t.length,n=new Array(o);n[0]=m;var l={};for(var i in a)hasOwnProperty.call(a,i)&&(l[i]=a[i]);l.originalType=e,l[d]="string"==typeof e?e:s,n[1]=l;for(var p=2;p<o;p++)n[p]=t[p];return r.createElement.apply(null,n)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3848:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>i,contentTitle:()=>n,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=t(7462),s=(t(7294),t(3905));const o={Title:"Dise\xf1o del diagrama de clases"},n=void 0,l={unversionedId:"Version 1.0/SPRINT 4 - BACKEND/Dise\xf1o del diagrama de clases",id:"Version 1.0/SPRINT 4 - BACKEND/Dise\xf1o del diagrama de clases",title:"Dise\xf1o del diagrama de clases",description:"Clases para el ORM",source:"@site/docs/03-Version 1.0/SPRINT 4 - BACKEND/03-Dise\xf1o del diagrama de clases.md",sourceDirName:"03-Version 1.0/SPRINT 4 - BACKEND",slug:"/Version 1.0/SPRINT 4 - BACKEND/Dise\xf1o del diagrama de clases",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Dise\xf1o del diagrama de clases",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-Version 1.0/SPRINT 4 - BACKEND/03-Dise\xf1o del diagrama de clases.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{Title:"Dise\xf1o del diagrama de clases"},sidebar:"tutorialSidebar",previous:{title:"Diagrama de clases y mapping",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Diagrama de clases y mapping"},next:{title:"Supabase como servicio backend",permalink:"/vanillaPill/docs/Version 1.0/SPRINT 4 - BACKEND/Supabase como servicio backend"}},i={},p=[{value:"Clases para el ORM",id:"clases-para-el-orm",level:2},{value:"Dise\xf1o de todas las clases y sus relaciones",id:"dise\xf1o-de-todas-las-clases-y-sus-relaciones",level:2},{value:"Diagrama de clases",id:"diagrama-de-clases",level:2}],c={toc:p},d="wrapper";function u(e){let{components:a,...o}=e;return(0,s.kt)(d,(0,r.Z)({},c,o,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"clases-para-el-orm"},"Clases para el ORM"),(0,s.kt)("p",null,"En primer lugar vamos a ",(0,s.kt)("strong",{parentName:"p"},"construir las clases")," necesarias para crear nuestro ",(0,s.kt)("strong",{parentName:"p"},"ORM"),"."),(0,s.kt)("p",null,"Cada clase va a tener:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"unas ",(0,s.kt)("strong",{parentName:"li"},"propiedades")," que se corresponder\xe1n con los campos de la tabla a la que est\xe1 asociada"),(0,s.kt)("li",{parentName:"ul"},"unos ",(0,s.kt)("strong",{parentName:"li"},"m\xe9todos")," que permitiran el acceso y manipulaci\xf3n de los datos de dicha tabla")),(0,s.kt)("p",null,"Por lo tanto, en esta versi\xf3n, necesitamos tres clases. La clase ",(0,s.kt)("strong",{parentName:"p"},"users"),", la clase ",(0,s.kt)("strong",{parentName:"p"},"perfiles")," y la clase ",(0,s.kt)("strong",{parentName:"p"},"proyectos"),"."),(0,s.kt)("p",null,"Los m\xe9todos b\xe1sico que suelen utilizarse en un ORM comprenden las funcionalidades propias de un ",(0,s.kt)("strong",{parentName:"p"},"CRUD (Create, Read, Update y Delete)"),". Nosotros usaremos los siguientes:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"getAll"),": Devolvera un objeto con todos los registros de la tabla."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"getById"),": Devolver\xe1 un objeto con los datos del registro que coincida con el campo ",(0,s.kt)("em",{parentName:"li"},"id"),"."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"getByUserId"),": Devolver\xe1 un objeto con los datos del registro que coincida con el campo ",(0,s.kt)("em",{parentName:"li"},"user_id"),"."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"create"),": Crear\xe1 una nueva fila con los campos que le pasemos."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"update"),": Actualizar\xe1 la fila correspondiente al registro cuyo campo id coincida con el que le pasemos, con los campos que le pasemos.")),(0,s.kt)("admonition",{title:"Como crear un diagrama de clases",type:"info"},(0,s.kt)("p",{parentName:"admonition"},"Si no recuerdas como crear un diagrama de clases aqu\xed te dejo un enlace que lo explica:"),(0,s.kt)("p",{parentName:"admonition"},"\ud83d\udc49",(0,s.kt)("a",{parentName:"p",href:"https://diagramasuml.com/diagrama-de-clases/?utm_content=cmp-true"},"C\xf3mo crear un Diagrama de clases"),"\ud83d\udc48")),(0,s.kt)("p",null,"El diagrama de clases para la clase perfiles quedar\xeda de la siguiente manera:"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Perfiles",src:t(549).Z,width:"316",height:"327"})),(0,s.kt)("p",null,"En este diagrama:"),(0,s.kt)("p",null,"La ",(0,s.kt)("strong",{parentName:"p"},"clase"),' "Perfil" representa los perfiles de tu sistema, con atributos correspondientes a las columnas en la base de datos.'),(0,s.kt)("p",null,"Los ",(0,s.kt)("strong",{parentName:"p"},"m\xe9todos est\xe1ticos")," (como getAll, getById, create, update) se pueden llamar directamente en la clase sin crear una instancia previa."),(0,s.kt)("p",null,"Los ",(0,s.kt)("strong",{parentName:"p"},"atributos"),' (id, created_at, nombre, etc.) son publicos (indicados por el "+") y se inicializan en el constructor.'),(0,s.kt)("p",null,"El m\xe9todo ",(0,s.kt)("strong",{parentName:"p"},"constructor")," se utiliza para crear una instancia de la clase Perfil a partir de un objeto con datos."),(0,s.kt)("h2",{id:"dise\xf1o-de-todas-las-clases-y-sus-relaciones"},"Dise\xf1o de todas las clases y sus relaciones"),(0,s.kt)("p",null,"De momento est\xe1 claro que, c\xf3mo m\xednimmo, necesitamos tantas clases como tablas queramos consultar. Pero eso no es todo, tambi\xe9n necesitamos otras clases que nos permitan interactuar con la base de datos a otro nivel (por ejemplo a trav\xe9s de consultas multitabla)."),(0,s.kt)("p",null,"Para dise\xf1ar las clases debemos tener presente todas las funcionalidades que se esperan de nuestra app (que en principio deber\xedan conincidir con los casos de uso)."),(0,s.kt)("p",null,"Y para definir todas las funcionalidades de nuestra app necesitarmos revisar todo el trabajo realizado en el momento en el que  definimos las especificaciones del proyecto, casos de usos y prototipos."),(0,s.kt)("p",null,"Hag\xe1moslo, y llegaremos a la conclusi\xf3n de que necesitamos las siguientes funcionalidades:"),(0,s.kt)("p",null,"Para los usuarios:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"registrar usuario"),(0,s.kt)("li",{parentName:"ul"},"iniciar sesi\xf3n"),(0,s.kt)("li",{parentName:"ul"},"cerrar sesi\xf3n"),(0,s.kt)("li",{parentName:"ul"},"borrar usuario"),(0,s.kt)("li",{parentName:"ul"},"actualizar usuario"),(0,s.kt)("li",{parentName:"ul"},"obtener datos de un usuario (email y contrase\xf1a)"),(0,s.kt)("li",{parentName:"ul"},"obtener una lista de todos los usuarios registrados")),(0,s.kt)("p",null,"Para los perfiles asociados a estos usuarios:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"obtener datos de un perfil asociado a un usuario  (nombre, apellidos, etc)"),(0,s.kt)("li",{parentName:"ul"},"obtener una lista de todos los perfiles"),(0,s.kt)("li",{parentName:"ul"},"borrar un perfil"),(0,s.kt)("li",{parentName:"ul"},"actualizar un perfil")),(0,s.kt)("p",null,"Para los proyectos:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"obtener datos de un proyecto seg\xfan su id (nombre, descripci\xf3n, etc)"),(0,s.kt)("li",{parentName:"ul"},"obtener datos de un proyecto seg\xfan el id del usuario que lo ha creado"),(0,s.kt)("li",{parentName:"ul"},"obtener una lista de todos los proyectos"),(0,s.kt)("li",{parentName:"ul"},"borrar un proyecto"),(0,s.kt)("li",{parentName:"ul"},"actualizar un proyecto")),(0,s.kt)("p",null,"Pero eso no es todo. Si nos fijamos en el prototipo que muestra la tabla con todos los proyectos veremos que los datos mostrados son el resultado de cruzar la tabla ",(0,s.kt)("em",{parentName:"p"},"proyectos")," con la tabla ",(0,s.kt)("em",{parentName:"p"},"perfiles"),", es decir, de una consulta multitabla. De esta funcionalidad derivar\xe1 una nueva clase llamada ",(0,s.kt)("em",{parentName:"p"},"proyectoDetalle"),". Y ocurre algo parecido con la tabla perfil."),(0,s.kt)("p",null,"Os lo vuelo a explicar despu\xe9s, con m\xe1s detalle."),(0,s.kt)("p",null,"Ahora toca dise\xf1ar el diagrama de clases tal y como nos lo explicaron en el m\xf3dulo de ",(0,s.kt)("strong",{parentName:"p"},"'Entornos de desarrollo'"),". El resultado final ser\xeda algo as\xed:"),(0,s.kt)("h2",{id:"diagrama-de-clases"},"Diagrama de clases"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Diagrama de clases",src:t(4362).Z,width:"1252",height:"554"})),(0,s.kt)("p",null,(0,s.kt)("a",{target:"_blank",href:t(4575).Z},"\ud83d\udd0d ",(0,s.kt)("strong",null,"AMPLIAR IMAGEN"))),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"Dise\xf1ado con GitMind (",(0,s.kt)("a",{parentName:"em",href:"https://gitmind.com/app/docs/fgi5pva1"},"https://gitmind.com/app/docs/fgi5pva1"),")")),(0,s.kt)("p",null,"Como puedes observar: La clase ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Users"))," representa la tabla ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"users")),", la clase ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Perfiles"))," representa a la tabla ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"perfiles"))," y la clase ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Proyectos"))," representa a la tabla ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"proyectos")),"."),(0,s.kt)("p",null,"Cada una tiene las mismas propiedades que tienen los campos de las tablas."),(0,s.kt)("p",null,"Por otro lado, tenemos las clases ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Perfil_detalle"))," y ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Proyecto_detalle")),". \xc9stas son ",(0,s.kt)("strong",{parentName:"p"},"clases heredadas")," de ",(0,s.kt)("em",{parentName:"p"},"Perfiles")," y ",(0,s.kt)("em",{parentName:"p"},"Proyectos")," respectivamente y tienen la peculiaridad de que incluyen alg\xfan atributo extra y tres nuevos m\xe9todos."),(0,s.kt)("p",null,"Os explico el por qu\xe9 de estas clases:"),(0,s.kt)("p",null,"Si revisamos el boceto donde se muestran todos los proyectos, podemos ver que en la tabla se muestra, en cada fila, la informaci\xf3n del proyecto junto con el nombre del autor."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"prototipo proyetos",src:t(9326).Z,width:"1397",height:"852"})),(0,s.kt)("p",null,"Los m\xe9todos de la clase ",(0,s.kt)("em",{parentName:"p"},"Proyectos")," solo incluye los campos de la tabla ",(0,s.kt)("em",{parentName:"p"},"proyectos"),". Pero en la tabla proyectos no aparece el nombre del autor sino su user_id."),(0,s.kt)("p",null,"Si queremos un m\xe9todo capaz de obtener toda la informaci\xf3n (resultado de una consulta que combina dos tablas), necesitamos un m\xe9todo nuevo: el m\xe9todo ",(0,s.kt)("em",{parentName:"p"},"getDetalleAll()"),"."),(0,s.kt)("p",null,"Y como este m\xe9todo nos retorna informaci\xf3n que no est\xe1 contemplada en las propiedades de la clase ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Proyectos")),", nos vemos obligado a crear una clase nueva (que heredada de la clase ",(0,s.kt)("em",{parentName:"p"},"Proyectos"),"), con dos propiedades nuevas ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"nombre_autor"))," y ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"apellidos_autor"))," y varios m\xe9todos a\xf1adidos: ",(0,s.kt)("em",{parentName:"p"},"getDetalleAll()"),", ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"getDetalleById(id: number)"))," y ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"getDetallaByUserId(iser_id: UUID)"))),(0,s.kt)("p",null,"Y con estas clases ya podemos crear nuestra ",(0,s.kt)("strong",{parentName:"p"},"capa de abstracci\xf3n")," entre la programaci\xf3n de la app y la l\xf3gica para acceder a los datos de base de datos."))}u.isMDXComponent=!0},4575:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/files/dc-1b2b47904518da02ba6c90fd8ef20e38.svg"},4362:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/dc-1b2b47904518da02ba6c90fd8ef20e38.svg"},549:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/dcperfiles-1c6beaac99af079dc2f7a60836ad27b0.png"},9326:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/proyectos-ddb8f57183c3d3b48cea380630424609.png"}}]);